
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<meta charset="UTF-8">
<head>
    <title>User List</title>
    <link rel="stylesheet" type="text/css" href="../dist/css/w2ui-1.4.1.css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
    <script type="text/javascript" src="../dist/js/w2ui-1.4.1.js"></script> 
 
</head>
<body>

<!-- view -->
    <div id="grid1" style="height:380px"></div>    
    <div id="grid2" style="height:270px; width:50%"></div>     
<br>

<!-- level::lev0('대기'), lev1('초등'), lve2('중고'), lev3('일반') -->
<script type="text/javascript">
$(function () {	
	
	$('#grid2').hide();
    $('#grid1').w2grid({ 
        name: 'grid1', 
        header: '회원관리',
        url: '../listUserData.do',    
        show: { 
        	header:true,
            toolbar: true,
            footer: true,
            lineNumbers: true,
            selectColumn:false,
            toolbarSave: true
        },
        /* searches: [
                   { field: 'userId', caption: '아이디', type: 'text' },
                   { field: 'userName', caption: '이름', type: 'text'},
                   { field: 'birthdate', caption: '생년월일', type: 'text'}, 
                   { field: 'level', caption: '등급', type: 'text' },
                   { field: 'joindate', caption: '가입일', type: 'text' }
                ], */
        columns: [   
			{ field: 'recid', caption: '번호', size: '5%'},
            { field: 'userName', caption: '이름', size: '10%'},            
            { field: 'userId', caption: '아이디', size: '10%' },            
            { field: 'level', caption: '등급', size: '5%' , editable:{type:'text'}   },
            { field: 'email', caption: '이메일', size: '10%', editable:{type:'text'}  },
            { field: 'birthdate', caption: '생년월일', size: '10%' },            
            { field: 'phone', caption: '연락처', size: '10%', editable:{type:'text'} },
            { field: 'addr', caption: '주소', size: '20%', editable:{type:'text'} },
            { field: 'joindate', caption: '가입일', size: '10%'},           
            { field: 'flag', caption: '탈퇴', size: '5%'/* , editable: { type: 'checkbox' }  */
            },
        ],
        onSave: function(event) {        	        	
        	//alert(" w2ui['grid1'].getChanges());
        	//console.log(updateContent);//
        	
        	var updateContent = JSON.stringify(w2ui['grid1'].getChanges());
      	
               $.ajax({
            	type:"post",
            	url:"/updateUserforAdmin.do",
            	cache:false,
            	data: {
            	    list: updateContent            	    
            	},
            	success:function(response){
            		alert('수정되었습니다.');     		
            	}, 
            	error:function(){
            		alert('Error while request...');
            	}            	
            })            
        	console.log(event);  
        },
        onClick: function (event) {
        	$('#grid2').show();        	
            w2ui['grid2'].clear();            
            var record = this.get(event.recid);
			
            w2ui['grid2'].add([
				{ recid: 0, name: '이름', value: record.userName },
                { recid: 1, name: '아이디', value: record.userId },                
                { recid: 2, name: '등급', value: record.level },
                { recid: 3, name: '이메일', value: record.email },                
                { recid: 4, name: '생년월일', value: record.birthdate },
                { recid: 5, name: '연락처', value: record.phone },
                { recid: 6, name: '주소', value: record.addr },
                { recid: 7, name: '가입일', value: record.joindate },
                { recid: 8, name: '탈퇴여부', value: record.flag },
            ]);
        }
    });  
    
     $('#grid2').w2grid({ 
        header: '상세보기',
        show: { header: true, columnHeaders: false},
        name: 'grid2', 
        columns: [                
            { field: 'name', caption: 'Name', size: '100px', style: 'background-color: #efefef; border-bottom: 1px solid white; padding-right: 5px;', attr: "align=right" },
            { field: 'value', caption: 'Value', size: '100%' }
        ]
    });    
    
    //w2ui['grid1'].load('/listUserData.do');
});
 </script>
 
	
</body>
</html>